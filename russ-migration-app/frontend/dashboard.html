<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Migration Assessment Dashboard | RUSS Consultancy Services</title>
    <link rel="stylesheet" href="/static/style.css" />
</head>

<body>
    <header class="header">
        <img src="/static/assets/russ_logo-removebg-preview.png" alt="RUSS Consultancy Logo" class="logo" />
        <div class="header-content">
            <h1>üìä Migration Assessment Results</h1>
            <p class="tagline"></p>
        </div>
    </header>

    <main class="main-content">
        <!-- üîÑ Loading Animation -->
        <div id="loading-screen" class="loading-screen">
            <div class="loader"></div>
            <p>Analyzing your AWR Reports... please wait ‚òÅÔ∏è</p>
        </div>

        <!-- ‚úÖ Results Container -->
        <div id="results-container" class="results-container hidden"></div>

        <!-- üì• Download Buttons -->
        <div class="downloads hidden" id="download-section">
            <h3>üì• Download Reports</h3>
            <div class="button-row">
                <a href="/download/xlsx" class="btn blue">Summary Excel</a>
                <a href="/download/ppt" class="btn blue">Summary PowerPoint</a>
                <a href="/download/zip" class="btn blue">All Final Excel Files (ZIP)</a>
            </div>
        </div>
    </main>

    <footer class="footer">
        ¬© 2025 RUSS Consultancy Services | Experience At Work
    </footer>

    <script>
        async function loadSummary() {
            const container = document.getElementById('results-container');
            const loader = document.getElementById('loading-screen');
            const downloadSection = document.getElementById('download-section');

            try {
                const response = await fetch('/outputs/summary.json');
                if (!response.ok) throw new Error('Summary not found');

                const data = await response.json();
                container.innerHTML = '';

                data.forEach((db) => {
                    const card = document.createElement('div');
                    card.className = 'result-card';
                    card.innerHTML = `
                        <h2>${db["DB Name"]}</h2>
                        <p><strong>Cloud:</strong> ${db["Cloud"]}</p>
                        <p><strong>Memory:</strong> ${db["Memory (GB)"]} GB</p>
                        <p><strong>Total IOPS:</strong> ${db["Total IOPS"]}</p>
                        <p><strong>Throughput:</strong> ${db["Throughput (MB/s)"]} MB/s</p>
                        <p><strong>Estimated vCPUs:</strong> ${db["Estimated vCPUs"]}</p>
                        <hr>
                        <p><strong>üß† Recommended VM:</strong> ${db["Recommended VM"]}</p>
                        <p><strong>Category:</strong> ${db["Category"]}</p>
                        <p><strong>VM vCPUs:</strong> ${db["VM vCPUs"]}</p>
                        <p><strong>VM Memory:</strong> ${db["VM Memory (GB)"]} GB</p>
                        <p><strong>Hourly Price:</strong> $${db["Hourly Price (USD)"]}</p>
                        <p><strong>Monthly Cost:</strong> $${db["Monthly Cost (USD)"]}</p>
                    `;
                    container.appendChild(card);
                });

                // Hide loader, show results + downloads with fade transition
                loader.classList.add('fade-out');
                setTimeout(() => {
                    loader.style.display = 'none';
                    container.classList.remove('hidden');
                    downloadSection.classList.remove('hidden');
                }, 600);

            } catch (err) {
                loader.innerHTML = `<p>‚ùå Error loading summary: ${err.message}</p>`;
            }
        }

        loadSummary();
    </script>
</body>

</html>